<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="viggo" />
    <title>å®æ—¶æ±‡ç‡è½¬æ¢å™¨ - ä¼˜åˆ›èµ„æºå¯¼èˆª</title>
    <link rel="shortcut icon" href="./assets/images/favicon.png">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Arimo:400,700,400italic">
    <link rel="stylesheet" href="./assets/css/fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/bootstrap.css">
<style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arimo', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .top-nav {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .home-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 25px;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .home-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .home-button i {
            font-size: 18px;
        }

        .nav-title {
            color: #fff;
            font-size: 24px;
            font-weight: bold;
        }

        /* ä¸»å®¹å™¨ */
        .currency-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 40px 20px;
            padding-top: 100px;
            border-top: 1px solid #eee;
        }

        .converter-header {
            text-align: center;
            color: #fff;
            margin-bottom: 40px;
        }

        .converter-header h1 {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .converter-header p {
            font-size: 18px;
            opacity: 0.9;
        }

        /* è´§å¸ç½‘æ ¼ */
        .currency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .currency-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .currency-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .currency-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .currency-flag {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }

        .currency-name {
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .currency-code {
            font-size: 14px;
            color: #666;
            margin-left: auto;
            background: #f0f0f0;
            padding: 4px 12px;
            border-radius: 12px;
        }

        .currency-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 24px;
            font-weight: 600;
            color: #333;
            transition: all 0.3s;
        }

        .currency-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
        }

        .update-info {
            text-align: center;
            color: rgba(255,255,255,0.8);
            font-size: 14px;
            margin-top: 30px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        .base-currency-selector {
            text-align: center;
            margin-bottom: 30px;
        }

        .base-currency-selector label {
            color: #fff;
            font-size: 16px;
            margin-right: 15px;
            font-weight: 600;
        }

        .base-currency-selector select {
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.3);
            background: rgba(255,255,255,0.2);
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
        }

        .base-currency-selector select option {
            background: #2a5298;
            color: #fff;
        }
</style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <div class="top-nav">
        <a href="index.html" class="home-button">
            <i class="fa fa-home"></i>
            <span>è¿”å›é¦–é¡µ</span>
        </a>
        <div class="nav-title">ğŸ’± å®æ—¶æ±‡ç‡è½¬æ¢å™¨</div>
        <div style="width: 140px;"></div>
    </div>

    <!-- ä¸»å†…å®¹ -->
    <div class="currency-container">
        <div class="converter-header">
            <h1>å…¨çƒè´§å¸å®æ—¶è½¬æ¢</h1>
            <p>æ”¯æŒå¤šç§ä¸»æµè´§å¸ï¼Œæ±‡ç‡å®æ—¶æ›´æ–°ï¼Œè¾“å…¥ä»»æ„é‡‘é¢è‡ªåŠ¨è”åŠ¨æ¢ç®—</p>
        </div>

        <div class="base-currency-selector">
            <label>åŸºå‡†è´§å¸ï¼š</label>
            <select id="base-currency">
                <option value="CNY" selected>CNY - äººæ°‘å¸</option>
                <option value="USD">USD - ç¾å…ƒ</option>
                <option value="EUR">EUR - æ¬§å…ƒ</option>
                <option value="JPY">JPY - æ—¥å…ƒ</option>
                <option value="GBP">GBP - è‹±é•‘</option>
                <option value="HKD">HKD - æ¸¯å¸</option>
                <option value="THB">THB - æ³°é“¢</option>
                <option value="MYR">MYR - é©¬æ¥è¥¿äºšæ—å‰ç‰¹</option>
            </select>
        </div>

        <div class="currency-grid" id="currency-grid">
            <!-- è´§å¸å¡ç‰‡å°†é€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
        </div>

        <div class="update-info" id="update-info">
            æ±‡ç‡æ›´æ–°æ—¶é—´ï¼šåŠ è½½ä¸­...
        </div>
    </div>

    <script>
    const currencies = {
        'USD': { name: 'ç¾å…ƒ', flag: 'us' },
        'EUR': { name: 'æ¬§å…ƒ', flag: 'eu' },
        'CNY': { name: 'äººæ°‘å¸', flag: 'cn' },
        'JPY': { name: 'æ—¥å…ƒ', flag: 'jp' },
        'GBP': { name: 'è‹±é•‘', flag: 'gb' },
        'HKD': { name: 'æ¸¯å¸', flag: 'hk' },
        'THB': { name: 'æ³°é“¢', flag: 'th' },
        'MYR': { name: 'é©¬æ¥è¥¿äºšæ—å‰ç‰¹', flag: 'my' }
    };

    let exchangeRates = {};
    let baseCurrency = 'CNY';
    let isUpdating = false;

    // è·å–æ±‡ç‡
    async function fetchExchangeRates(base) {
        try {
            const response = await fetch(`https://api.exchangerate-api.com/v4/latest/${base}`);
            const data = await response.json();
            exchangeRates = data.rates;
            
            const updateDate = new Date(data.time_last_updated * 1000);
            document.getElementById('update-info').textContent = 
                `æ±‡ç‡æ›´æ–°æ—¶é—´ï¼š${updateDate.toLocaleString('zh-CN')} | åŸºå‡†è´§å¸ï¼š${base}`;
            
            return data.rates;
        } catch (error) {
            console.error('è·å–æ±‡ç‡å¤±è´¥:', error);
            document.getElementById('update-info').textContent = 'æ±‡ç‡è·å–å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
            return null;
        }
    }

    // åˆ›å»ºè´§å¸å¡ç‰‡
    function createCurrencyCards() {
        const grid = document.getElementById('currency-grid');
        grid.innerHTML = '';

        Object.keys(currencies).forEach(code => {
            const card = document.createElement('div');
            card.className = 'currency-card';
            card.innerHTML = `
                <div class="currency-header">
                    <img src="https://flagcdn.com/w40/${currencies[code].flag}.png" 
                         alt="${code}" 
                         class="currency-flag">
                    <span class="currency-name">${currencies[code].name}</span>
                    <span class="currency-code">${code}</span>
                </div>
                <input type="number" 
                       class="currency-input" 
                       id="input-${code}" 
                       placeholder="0.00"
                       step="0.01">
            `;
            grid.appendChild(card);

            // æ·»åŠ è¾“å…¥äº‹ä»¶ç›‘å¬
            const input = card.querySelector('.currency-input');
            input.addEventListener('input', function() {
                if (!isUpdating) {
                    updateAllCurrencies(code, parseFloat(this.value) || 0);
                }
            });
        });
    }

    // æ›´æ–°æ‰€æœ‰è´§å¸
    function updateAllCurrencies(sourceCode, sourceAmount) {
        isUpdating = true;

        Object.keys(currencies).forEach(targetCode => {
            if (targetCode !== sourceCode) {
                const input = document.getElementById(`input-${targetCode}`);
                if (input) {
                    const rate = exchangeRates[targetCode] / exchangeRates[sourceCode];
                    const result = sourceAmount * rate;
                    input.value = result.toFixed(2);
                }
            }
        });

        isUpdating = false;
    }

    // åŸºå‡†è´§å¸åˆ‡æ¢
    document.getElementById('base-currency').addEventListener('change', async function() {
        baseCurrency = this.value;
        await fetchExchangeRates(baseCurrency);
        
        // å¦‚æœæœ‰è¾“å…¥å€¼ï¼Œé‡æ–°è®¡ç®—
        const firstInput = document.getElementById(`input-${baseCurrency}`);
        if (firstInput && firstInput.value) {
            updateAllCurrencies(baseCurrency, parseFloat(firstInput.value) || 0);
        }
    });

    // åˆå§‹åŒ–
    (async function() {
        createCurrencyCards();
        await fetchExchangeRates(baseCurrency);
        
        // è®¾ç½®é»˜è®¤å€¼
        const cnyInput = document.getElementById('input-CNY');
        if (cnyInput) {
            cnyInput.value = '100';
            updateAllCurrencies('CNY', 100);
        }
    })();
    </script>
</body>
</html>
